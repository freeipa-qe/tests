#!/bin/sh
echo "user inject starts..."
echo redhat123 | kinit admin > /dev/null 2>&1

h=$1
start=$2
end=$3

if [ -z $h ]
then
	echo "pick default: header letter $h"
	h="z"
fi

if [ -z $start ]
then
	echo "pick default: starting uid=100"
	start=100
fi

if [ -z $end ]
then
	echo "pick default: ending uid=120"
	end=120
fi

echo "starting injection, uid header letter [$h], from [$start] to [$end]"

for (( i = $start ; i<= $end ; i++ ))
do
        ipa-adduser -c GECOS -d /home/$h$i -f "$h"user -l $i -p redhat123 -s /bin/bash $h$i
done

echo "finished. show one user to prove the insertion"
echo "=========== user [$h $end] =================="
ipa-finduser -a $h$end
echo "============================================="
echo

