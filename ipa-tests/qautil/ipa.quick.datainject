#!/bin/sh
echo "quick data inject starts..."
echo redhat123 | kinit admin
h=$1
if [ -z $h ]
then
	h="z"
fi

last="099"
ipa-addgroup -d "root group" grp$last
for (( i = 100; i< 120; i++ ))
do
        ipa-adduser -c GECOS -d /home/$h$i -f "$h"user -l $i -p redhat123 -s /bin/bash $h$i
        ipa-addgroup -d "group $i" grp$i
        ipa-modgroup -a "$h"$i grp$i
        ipa-modgroup -g grp$i grp$last
        #echo "last=$last i=$i"
        last=$i
done
echo "finished. show one user to prove the insertion"
echo "=========== user [$h 119] =================="
ipa-finduser -a $h$last
echo "=========================================="
echo "set phone number to 650-123-4567 for accounts: ($h user 101,102,103)"
ipa-moduser --addattr "telephonenumber=650-123-4567" "$h"101
ipa-moduser --addattr "telephonenumber=650-123-4567" "$h"102
ipa-moduser --addattr "telephonenumber=650-123-4567" "$h"103
ipa-lockuser "$h"103
