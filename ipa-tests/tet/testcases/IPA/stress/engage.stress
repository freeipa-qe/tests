#!/bin/sh
#
# File Name: engage.stress
#
######### Include directories ############################################
. $mainRunBaseDir/acceptance/quickinstall/engage.quickinstall
. $mainRunBaseDir/acceptance/quickuninstall/engage.quickuninstall
. $mainRunBaseDir/stress/kinit/engage.kinit
. $mainRunBaseDir/stress/ipaadduser/engage.ipaadduser
. $mainRunBaseDir/stress/ipahoststress/engage.ipahoststress

#####################################################

stress_default()
{
	quickinstall_default
	kinit_default
	ipaadduser_default
	ipahoststress_default
	quickuninstall_default
}

# This function will ask the user for more information/choices if needed.
#
stress_ask()
{
		quickinstall_ask
		kinit_ask
		ipaadduser_ask
		ipahoststress_ask
		quickuninstall_ask
}

# This function will print the user's choices (aka variables)
#
stress_print()
{
		quickinstall_print
		kinit_print
		ipaadduser_print
		ipahoststress_print
		quickuninstall_print
}

# This function will echo in shell's format the user's choices
# It is the calling function that will redirect the output to
# the saved config file.
#
stress_save()
{
	quickinstall_save
	kinit_save
	ipaadduser_save
	ipahoststress_save
	quickuninstall_save
}

# This function will check that the test suite may be executed
# It may also perform some kind of pre-configuration of the machine.
# This function should "exit 1" if there is problem.
#
stress_check()
{
		quickinstall_check
		kinit_check
		ipaadduser_check
		ipahoststress_check
		quickuninstall_check
}

# This function will run the test suite
#
stress_run()
{
echo "Starting Stress Tests........."

TET_SUITE_ROOT=$mainRunBaseDir/acceptance; export TET_SUITE_ROOT
if [ $MainRunStartup = y ] ; then quickinstall_startup ; fi
if [ $MainRunTests = y ] ; then quickinstall_run ; fi
if [ $MainRunCleanup = y ] ; then quickinstall_cleanup ; fi

TET_SUITE_ROOT=$mainRunBaseDir/kinit; export TET_SUITE_ROOT
if [ $MainRunStartup = y ] ; then kinit_startup ; fi
if [ $MainRunTests = y ] ; then kinit_run ; fi
if [ $MainRunCleanup = y ] ; then kinit_cleanup ; fi

TET_SUITE_ROOT=$mainRunBaseDir/ipaadduser; export TET_SUITE_ROOT
if [ $MainRunStartup = y ] ; then ipaadduser_startup ; fi
if [ $MainRunTests = y ] ; then ipaadduser_run ; fi
if [ $MainRunCleanup = y ] ; then ipaadduser_cleanup ; fi

TET_SUITE_ROOT=$mainRunBaseDir/ipahoststress; export TET_SUITE_ROOT
if [ $MainRunStartup = y ] ; then ipahoststress_startup ; fi
if [ $MainRunTests = y ] ; then ipahoststress_run ; fi
if [ $MainRunCleanup = y ] ; then ipahoststress_cleanup ; fi

TET_SUITE_ROOT=$mainRunBaseDir/acceptance; export TET_SUITE_ROOT
if [ $MainRunStartup = y ] ; then quickuninstall_startup ; fi
if [ $MainRunTests = y ] ; then quickuninstall_run ; fi
if [ $MainRunCleanup = y ] ; then quickuninstall_cleanup ; fi

# uninstall MUST be last
#TET_SUITE_ROOT=$mainRunBaseDir/stress; export TET_SUITE_ROOT
#if [ $MainRunStartup = y ] ; then quickuninstall_startup ; fi
#if [ $MainRunTests = y ] ; then quickuninstall_run ; fi

}



#
# End of file
