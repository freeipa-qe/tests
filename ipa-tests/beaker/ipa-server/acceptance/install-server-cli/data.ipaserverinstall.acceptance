#Files to check
NSSWITCH="/etc/nsswitch.conf"
SSSD="/etc/sssd/sssd.conf"
KRB5="/etc/krb5.conf"
DEFAULT="/etc/ipa/default.conf"
AUTHCONFIG="/etc/sysconfig/authconfig"
VERSION="2.0.0"

#Realm used in these tests
MYREALM="RALEIGHREALM"
MYHOSTNAME="test.raleigh"

# IP for tests
NEWIPADDRESS="10.16.19.131"

# Lines to check after install

# nsswitch.conf updates 
passwd="files sss"
shadow="files sss"
group="files sss"
netgroup="files sss"

# sssd.conf updates
krb5_realm_myrealm="$MYREALM $MYREALM"
cache_credentials="True True"
ipa_domain=$DOMAIN
id_provider="ipa"
auth_provider="ipa krb5"
access_provider="ipa"
chpass_provider="ipa krb5"
krb5_realm=$RELM


# krb5.conf updates
dns_lookup_kdc="true"
default_realm=$RELM
dns_lookup_realm="true"
rdns="false"
ticket_lifetime="24h 36000"
forwardable="yes true"
pkinit_anchors="FILE:/etc/ipa/ca.crt"
debug_krb5="false"
renew_lifetime="36000"
krb4_convert="false"

#authconfig updates
USESSSDAUTH="yes"
USEKERBEROS="yes"
USESSSD="yes"

#default.conf contents
basedn="dc=${MYREALM,,}"
realm="$MYREALM"
domain=$DOMAIN

#uninstall check
ipactl_uninstall="IPA is not configured (see man pages of ipa-server-install for help)"


# password checks
dm_pw="DSSecret123"
master_pw="MasterSecret123"

# cert check
selfsign_cert="type=NSSDB,location=/etc/dirsrv/slapd-$RELM,nickname=Server-Cert,token=NSS Certificate DB type=NSSDB,location=/etc/httpd/alias,nickname=Server-Cert,token=NSS Certificate DB"
selfsign_issuer="CN=TESTRELM Certificate Authority CN=TESTRELM Certificate Authority"

#zonemgr check
admin_email="root.$HOSTNAME."
non_default_admin_email="test_admin@$MYHOSTNAME"
non_default_admin_email_zonemgr="test_admin.$MYHOSTNAME."

#forwarder check
good_ping="--- redhat.com ping statistics ---"
bad_ping="ping: unknown host redhat.com"


# new IP check
hname=`echo $HOSTNAME | cut -d "." -f1 | xargs echo`
hosts_newip="$NEWIPADDRESS$HOSTNAME$hname"
resolv_newip="nameserver$NEWIPADDRESS"


# subject check
cert_subject="O=CUPCAKE"
default_subject="O=$RELM"
realm_subject="O=$MYREALM"

# User used in these tests
testuser="TestUser"
testpwd="TestPassword"
