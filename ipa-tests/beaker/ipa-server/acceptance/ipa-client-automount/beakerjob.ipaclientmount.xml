<job>
	<whiteboard>
		IPA client automount (use extended install :: RHEL 6.4 :: x86_64 :: 1 master , 1 replica , 2 clients)
	</whiteboard>
	<recipeSet priority="Normal">
		<recipe kernel_options="" kernel_options_post="" ks_meta="" role="MASTER_env1" whiteboard="MASTER">
			<autopick random="false"/>
			<watchdog panic="None"/>
			<packages/>
			<ks_appends/>
		    <repos>
		        <!--
                <repo name="ipa" url="http://mickey.dsdev.sjc.redhat.com/repos/pki/ipa/devel/rhel6/devel_x86_64/x86_64//"/>
                <repo name="ipa_noarch" url="http://mickey.dsdev.sjc.redhat.com/repos/pki/ipa/devel/rhel6/devel_x86_64/noarch//"/>
                <repo name="ipa" url="http://mickey.dsdev.sjc.redhat.com/repos/pki/ipa/devel/rhel6/20121029-170002/x86_64/"/>
                <repo name="ipa_noarch" url="http://mickey.dsdev.sjc.redhat.com/repos/pki/ipa/devel/rhel6/20121029-170002/noarch/"/>
                -->
            </repos>
            <distroRequires>
                <and>
                <distro_variant op="=" value="Server"/>
                <distro_arch op="=" value="x86_64"/>
                <distro_family op="=" value="RedHatEnterpriseLinux6"/>
                </and>
                <distro_virt op="=" value=""/>
            </distroRequires>
			<hostRequires>
				<and>
					<system_type value="Machine"/>
					<memory op="&gt;=" value="1000"/>
				</and>
			</hostRequires>
			<partitions/>
			<task name="/distribution/install" role="STANDALONE">
				<params/>
			</task>
			<task name="/distribution/pkginstall" role="STANDALONE">
				<params>
					<param name="PKGARGNAME" value="expect"/>
				</params>
			</task>
            <task name="/CoreOS/ipa-server/shared" role="STANDALONE">
                <params/>
            </task>
			<task name="/CoreOS/ipa-server/acceptance/quickinstall" role="MASTER_env1">
			    <params>
			        <param name="TOPO1" value="default"/>
			    </params>
			</task>
			<task name="/CoreOS/ipa-server/acceptance/ipa-client-automount" role="MASTER_env1">
				<params/>
			</task>
		</recipe>

		<recipe kernel_options="" kernel_options_post="" ks_meta="" role="REPLICA_env1" whiteboard="REPLICA1">
			<autopick random="false"/>
			<watchdog panic="None"/>
			<packages/>
			<ks_appends/>
		    <repos>
		        <!--
                <repo name="ipa" url="http://mickey.dsdev.sjc.redhat.com/repos/pki/ipa/devel/rhel6/devel_x86_64/x86_64//"/>
                <repo name="ipa_noarch" url="http://mickey.dsdev.sjc.redhat.com/repos/pki/ipa/devel/rhel6/devel_x86_64/noarch//"/>
                -->
            </repos>
            <distroRequires>
                <and>
                <distro_variant op="=" value="Server"/>
                <distro_arch op="=" value="x86_64"/>
                <distro_family op="=" value="RedHatEnterpriseLinux6"/>
                </and>
                <distro_virt op="=" value=""/>
            </distroRequires>
			<hostRequires>
				<and>
					<system_type value="Machine"/>
					<memory op="&gt;=" value="1000"/>
				</and>
			</hostRequires>
			<partitions/>
			<task name="/distribution/install" role="STANDALONE">
				<params/>
			</task>
			<task name="/distribution/pkginstall" role="STANDALONE">
				<params>
					<param name="PKGARGNAME" value="expect"/>
				</params>
			</task>
            <task name="/CoreOS/ipa-server/shared" role="STANDALONE">
                <params/>
            </task>
			<task name="/CoreOS/ipa-server/acceptance/quickinstall" role="REPLICA_env1">
				<params/>
			</task>
			<task name="/CoreOS/ipa-server/acceptance/ipa-client-automount" role="REPLICA_env1">
				<params/>
			</task>
		</recipe>



		<recipe kernel_options="" kernel_options_post="" ks_meta="" role="CLIENT_env1" whiteboard="NFS">
			<autopick random="false"/>
			<watchdog panic="None"/>
			<packages/>
			<ks_appends/>
		    <repos>
		        <!--
                <repo name="ipa" url="http://mickey.dsdev.sjc.redhat.com/repos/pki/ipa/devel/rhel6/devel_x86_64/x86_64//"/>
                <repo name="ipa_noarch" url="http://mickey.dsdev.sjc.redhat.com/repos/pki/ipa/devel/rhel6/devel_x86_64/noarch//"/>
                -->
            </repos>
            <distroRequires>
                <and>
                <distro_variant op="=" value="Server"/>
                <distro_arch op="=" value="x86_64"/>
                <distro_family op="=" value="RedHatEnterpriseLinux6"/>
                </and>
                <distro_virt op="=" value=""/>
            </distroRequires>
			<hostRequires>
				<and>
					<system_type value="Machine"/>
					<memory op="&gt;=" value="1000"/>
				</and>
			</hostRequires>
			<partitions/>
			<task name="/distribution/install" role="STANDALONE">
				<params/>
			</task>
			<task name="/distribution/pkginstall" role="STANDALONE">
				<params>
					<param name="PKGARGNAME" value="expect"/>
				</params>
			</task>
            <task name="/CoreOS/ipa-server/shared" role="STANDALONE">
                <params/>
            </task>
			<task name="/CoreOS/ipa-server/acceptance/quickinstall" role="CLIENT_env1">
				<params/>
			</task>
			<task name="/CoreOS/ipa-server/acceptance/ipa-client-automount" role="CLIENT_env1">
				<params/>
			</task>
		</recipe>

		<recipe kernel_options="" kernel_options_post="" ks_meta="" role="CLIENT_env1" whiteboard="CLIENT">
			<autopick random="false"/>
			<watchdog panic="None"/>
			<packages/>
			<ks_appends/>
		    <repos>
		        <!--
                <repo name="ipa" url="http://mickey.dsdev.sjc.redhat.com/repos/pki/ipa/devel/rhel6/devel_x86_64/x86_64//"/>
                <repo name="ipa_noarch" url="http://mickey.dsdev.sjc.redhat.com/repos/pki/ipa/devel/rhel6/devel_x86_64/noarch//"/>
                -->
            </repos>
            <distroRequires>
                <and>
                <distro_variant op="=" value="Server"/>
                <distro_arch op="=" value="x86_64"/>
                <distro_family op="=" value="RedHatEnterpriseLinux6"/>
                </and>
                <distro_virt op="=" value=""/>
            </distroRequires>
			<hostRequires>
				<and>
					<system_type value="Machine"/>
					<memory op="&gt;=" value="1000"/>
				</and>
			</hostRequires>
			<partitions/>
			<task name="/distribution/install" role="STANDALONE">
				<params/>
			</task>
			<task name="/distribution/pkginstall" role="STANDALONE">
				<params>
					<param name="PKGARGNAME" value="expect"/>
				</params>
			</task>
            <task name="/CoreOS/ipa-server/shared" role="STANDALONE">
                <params/>
            </task>
			<task name="/CoreOS/ipa-server/acceptance/quickinstall" role="CLIENT_env1">
				<params/>
			</task>
			<task name="/CoreOS/ipa-server/acceptance/ipa-client-automount" role="CLIENT_env1">
				<params/>
			</task>
		</recipe>
	</recipeSet>
</job>

